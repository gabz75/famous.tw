/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

//     Underscore.js 1.7.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

!function(){var t,e,n;!function(i){function r(t,e){return b.call(t,e)}function s(t,e){var n,i,r,s,o,a,u,c,l,h,p,f=e&&e.split("/"),d=y.map,m=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(f=f.slice(0,f.length-1),t=t.split("/"),o=t.length-1,y.nodeIdCompat&&O.test(t[o])&&(t[o]=t[o].replace(O,"")),t=f.concat(t),l=0;l<t.length;l+=1)if(p=t[l],"."===p)t.splice(l,1),l-=1;else if(".."===p){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||m)&&d){for(n=t.split("/"),l=n.length;l>0;l-=1){if(i=n.slice(0,l).join("/"),f)for(h=f.length;h>0;h-=1)if(r=d[f.slice(0,h).join("/")],r&&(r=r[i])){s=r,a=l;break}if(s)break;!u&&m&&m[i]&&(u=m[i],c=l)}!s&&u&&(s=u,a=c),s&&(n.splice(0,a,s),t=n.join("/"))}return t}function o(t,e){return function(){return f.apply(i,w.call(arguments,0).concat([t,e]))}}function a(t){return function(e){return s(e,t)}}function u(t){return function(e){v[t]=e}}function c(t){if(r(g,t)){var e=g[t];delete g[t],_[t]=!0,p.apply(i,e)}if(!r(v,t)&&!r(_,t))throw new Error("No "+t);return v[t]}function l(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function h(t){return function(){return y&&y.config&&y.config[t]||{}}}var p,f,d,m,v={},g={},y={},_={},b=Object.prototype.hasOwnProperty,w=[].slice,O=/\.js$/;d=function(t,e){var n,i=l(t),r=i[0];return t=i[1],r&&(r=s(r,e),n=c(r)),r?t=n&&n.normalize?n.normalize(t,a(e)):s(t,e):(t=s(t,e),i=l(t),r=i[0],t=i[1],r&&(n=c(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},m={require:function(t){return o(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:h(t)}}},p=function(t,e,n,s){var a,l,h,p,f,y,b=[],w=typeof n;if(s=s||t,"undefined"===w||"function"===w){for(e=!e.length&&n.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=d(e[f],s),l=p.f,"require"===l)b[f]=m.require(t);else if("exports"===l)b[f]=m.exports(t),y=!0;else if("module"===l)a=b[f]=m.module(t);else if(r(v,l)||r(g,l)||r(_,l))b[f]=c(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,o(s,!0),u(l),{}),b[f]=v[l]}h=n?n.apply(v[t],b):void 0,t&&(a&&a.exports!==i&&a.exports!==v[t]?v[t]=a.exports:h===i&&y||(v[t]=h))}else t&&(v[t]=n)},t=e=f=function(t,e,n,r,s){if("string"==typeof t)return m[t]?m[t](e):c(d(t,e).f);if(!t.splice){if(y=t,y.deps&&f(y.deps,y.callback),!e)return;e.splice?(t=e,e=n,n=null):t=i}return e=e||function(){},"function"==typeof n&&(n=r,r=s),r?p(i,t,e,n):setTimeout(function(){p(i,t,e,n)},4),f},f.config=function(t){return f(t)},t._defined=v,n=function(t,e,n){e.splice||(n=e,e=[]),r(v,t)||r(g,t)||(g[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("famous/core/Entity",["require","exports","module"],function(t,e,n){function i(t){return a[t]}function r(t,e){a[t]=e}function s(t){var e=a.length;return r(e,t),e}function o(t){r(t,null)}var a=[];n.exports={register:s,unregister:o,get:i,set:r}}),n("famous/core/Transform",["require","exports","module"],function(t,e,n){function i(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function r(t){return Math.sqrt(i(t))}function s(t){return 0>t?-1:1}var o={};o.precision=1e-6,o.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},o.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},o.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},o.moveThen=function(t,e){t[2]||(t[2]=0);var n=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],i=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],r=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return o.thenMove(e,[n,i,r])},o.translate=function(t,e,n){return void 0===n&&(n=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1]},o.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},o.scale=function(t,e,n){return void 0===n&&(n=1),[t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1]},o.rotateX=function(t){var e=Math.cos(t),n=Math.sin(t);return[1,0,0,0,0,e,n,0,0,-n,e,0,0,0,0,1]},o.rotateY=function(t){var e=Math.cos(t),n=Math.sin(t);return[e,0,-n,0,0,1,0,0,n,0,e,0,0,0,0,1]},o.rotateZ=function(t){var e=Math.cos(t),n=Math.sin(t);return[e,n,0,0,-n,e,0,0,0,0,1,0,0,0,0,1]},o.rotate=function(t,e,n){var i=Math.cos(t),r=Math.sin(t),s=Math.cos(e),o=Math.sin(e),a=Math.cos(n),u=Math.sin(n),c=[s*a,i*u+r*o*a,r*u-i*o*a,0,-s*u,i*a-r*o*u,r*a+i*o*u,0,o,-r*s,i*s,0,0,0,0,1];return c},o.rotateAxis=function(t,e){var n=Math.sin(e),i=Math.cos(e),r=1-i,s=t[0]*t[0]*r,o=t[0]*t[1]*r,a=t[0]*t[2]*r,u=t[1]*t[1]*r,c=t[1]*t[2]*r,l=t[2]*t[2]*r,h=t[0]*n,p=t[1]*n,f=t[2]*n,d=[s+i,o+f,a-p,0,o-f,u+i,c+h,0,a+p,c-h,l+i,0,0,0,0,1];return d},o.aboutOrigin=function(t,e){var n=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),i=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),r=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return o.thenMove(e,[n,i,r])},o.skew=function(t,e,n){return[1,0,0,0,Math.tan(n),1,0,0,Math.tan(e),Math.tan(t),1,0,0,0,0,1]},o.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},o.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},o.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},o.getTranslate=function(t){return[t[12],t[13],t[14]]},o.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],n=t[4]*t[10]-t[6]*t[8],i=t[4]*t[9]-t[5]*t[8],r=t[1]*t[10]-t[2]*t[9],s=t[0]*t[10]-t[2]*t[8],o=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],l=t[0]*e-t[1]*n+t[2]*i,h=1/l,p=[h*e,-h*r,h*a,0,-h*n,h*s,-h*u,0,h*i,-h*o,h*c,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},o.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},o.interpret=function(t){var e=[t[0],t[1],t[2]],n=s(e[0]),a=r(e),u=[e[0]+n*a,e[1],e[2]],c=2/i(u);if(c>=1/0)return{translate:o.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];l[0]=1-c*u[0]*u[0],l[5]=1-c*u[1]*u[1],l[10]=1-c*u[2]*u[2],l[1]=-c*u[0]*u[1],l[2]=-c*u[0]*u[2],l[6]=-c*u[1]*u[2],l[4]=l[1],l[8]=l[2],l[9]=l[6];var h=o.multiply(l,t),p=[h[5],h[6]],f=s(p[0]),d=r(p),m=[p[0]+f*d,p[1]],v=2/i(m),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-v*m[0]*m[0],g[10]=1-v*m[1]*m[1],g[6]=-v*m[0]*m[1],g[9]=g[6];var y=o.multiply(g,l),_=o.multiply(y,t),b=o.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=o.multiply(_,b),y=o.multiply(b,y);var w={};return w.translate=o.getTranslate(t),w.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],w.rotate[0]||(w.rotate[0]=0,w.rotate[2]=Math.atan2(y[4],y[5])),w.scale=[_[0],_[5],_[10]],w.skew=[Math.atan2(_[9],w.scale[2]),Math.atan2(_[8],w.scale[2]),Math.atan2(_[4],w.scale[0])],Math.abs(w.rotate[0])+Math.abs(w.rotate[2])>1.5*Math.PI&&(w.rotate[1]=Math.PI-w.rotate[1],w.rotate[1]>Math.PI&&(w.rotate[1]-=2*Math.PI),w.rotate[1]<-Math.PI&&(w.rotate[1]+=2*Math.PI),w.rotate[0]<0?w.rotate[0]+=Math.PI:w.rotate[0]-=Math.PI,w.rotate[2]<0?w.rotate[2]+=Math.PI:w.rotate[2]-=Math.PI),w},o.average=function(t,e,n){n=void 0===n?.5:n;for(var i=o.interpret(t),r=o.interpret(e),s={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)s.translate[a]=(1-n)*i.translate[a]+n*r.translate[a],s.rotate[a]=(1-n)*i.rotate[a]+n*r.rotate[a],s.scale[a]=(1-n)*i.scale[a]+n*r.scale[a],s.skew[a]=(1-n)*i.skew[a]+n*r.skew[a];return o.build(s)},o.build=function(t){var e=o.scale(t.scale[0],t.scale[1],t.scale[2]),n=o.skew(t.skew[0],t.skew[1],t.skew[2]),i=o.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return o.thenMove(o.multiply(o.multiply(i,n),e),t.translate)},o.equals=function(t,e){return!o.notEquals(t,e)},o.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},o.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},o.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],o.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],n.exports=o}),n("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,n){function i(){this.result={}}function r(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var s=t("./Transform");i._instance=new i,i.parse=function(t,e){return i._instance.parse(t,e)},i.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,s.identity),this.result},i.prototype.reset=function(){this.result={}};var o=[0,0];i.prototype._parseSpec=function(t,e,n){var i,a,u,c,l,h,p;if("number"==typeof t){if(i=t,u=e.transform,h=e.align||e.origin,e.size&&h&&(h[0]||h[1])){var f=[h[0]*e.size[0],h[1]*e.size[1],0];u=s.thenMove(u,r(f,n))}this.result[i]={transform:u,opacity:e.opacity,origin:e.origin||o,align:e.align||e.origin||o,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,n);else{a=t.target,u=e.transform,c=e.opacity,l=e.origin,h=e.align,p=e.size;var m=n;if(void 0!==t.opacity&&(c=e.opacity*t.opacity),t.transform&&(u=s.multiply(e.transform,t.transform)),t.origin&&(l=t.origin,m=e.transform),t.align&&(h=t.align),t.size){var v=e.size;p=[void 0!==t.size[0]?t.size[0]:v[0],void 0!==t.size[1]?t.size[1]:v[1]],v&&(h||(h=l),h&&(h[0]||h[1])&&(u=s.thenMove(u,r([h[0]*v[0],h[1]*v[1],0],n))),l&&(l[0]||l[1])&&(u=s.moveThen([-l[0]*p[0],-l[1]*p[1],0],u))),m=e.transform,l=null,h=null}this._parseSpec(a,{transform:u,opacity:c,origin:l,align:h,size:p},m)}}},n.exports=i}),n("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,n){function i(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function r(t,e,n){for(var i=o.parse(t,e),a=Object.keys(i),u=0;u<a.length;u++){var c=a[u],l=s.get(c),h=i[c];h.allocator=e.allocator;var p=l.commit(h);p?r(p,e,n):n[c]=h}}var s=t("./Entity"),o=t("./SpecParser");i.prototype.add=function(t){var e=t instanceof i?t:new i(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},i.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},i.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof i?t:this},i.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},i.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),n=0;n<e.length;n++){var i=e[n];if(void 0===this._resultCache[i]){var o=s.get(i);o.cleanup&&o.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},r(this.render(),t,this._resultCache)},i.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,n=0;n<e.length;n++)t[n]=e[n].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},n.exports=i}),n("famous/core/EventEmitter",["require","exports","module"],function(t,e,n){function i(){this.listeners={},this._owner=this}i.prototype.emit=function(t,e){var n=this.listeners[t];if(n)for(var i=0;i<n.length;i++)n[i].call(this._owner,e);return this},i.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var n=this.listeners[t].indexOf(e);return 0>n&&this.listeners[t].push(e),this},i.prototype.addListener=i.prototype.on,i.prototype.removeListener=function(t,e){var n=this.listeners[t].indexOf(e);return n>=0&&this.listeners[t].splice(n,1),this},i.prototype.bindThis=function(t){this._owner=t},n.exports=i}),n("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,n){function i(){r.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var r=t("./EventEmitter");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},i.setOutputHandler=function(t,e){e instanceof i&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},i.prototype.emit=function(t,e){r.prototype.emit.apply(this,arguments);var n=0;for(n=0;n<this.downstream.length;n++)this.downstream[n].trigger&&this.downstream[n].trigger(t,e);for(n=0;n<this.downstreamFn.length;n++)this.downstreamFn[n](t,e);return this},i.prototype.trigger=i.prototype.emit,i.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,n=e.indexOf(t);return 0>n&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},i.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,n=e.indexOf(t);return n>=0?(e.splice(n,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},i.prototype.on=function(t){if(r.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var n=0;n<this.upstream.length;n++)this.upstream[n].on(t,e)}return this},i.prototype.addListener=i.prototype.on,i.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var n in this.upstreamListeners)t.on(n,this.upstreamListeners[n])}return this},i.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var n in this.upstreamListeners)t.removeListener(n,this.upstreamListeners[n])}return this},n.exports=i}),n("famous/core/ElementAllocator",["require","exports","module"],function(t,e,n){function i(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}i.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.removeChild(e.firstChild));this.container=t}},i.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,n=this.detachedNodes[t];return n.length>0?e=n.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},i.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),n=this.detachedNodes[e];n.push(t),this.nodeCount--},i.prototype.getNodeCount=function(){return this.nodeCount},n.exports=i}),n("famous/utilities/Utility",["require","exports","module"],function(t,e,n){var i={};i.Direction={X:0,Y:1,Z:2},i.after=function(t,e){var n=t;return function(){n--,0===n&&e.apply(this,arguments)}},i.loadURL=function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},n.open("GET",t),n.send()},i.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var n=document.createDocumentFragment();e.hasChildNodes();)n.appendChild(e.firstChild);return n},n.exports=i}),n("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,e,n){function i(t){this.method=t,this._instances=[],this.state=[]}var r=t("famous/utilities/Utility");i.SUPPORTS_MULTIPLE=!0,i.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},i.prototype.set=function(t,e,n){for(var i=r.after(t.length,n),s=0;s<t.length;s++)this._instances[s]||(this._instances[s]=new this.method),this._instances[s].set(t[s],e,i)},i.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},n.exports=i}),n("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function r(t,e,n){return(1-n)*t+n*e}function s(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function o(t,e){var n={curve:e.curve};return e.duration&&(n.duration=e.duration),e.speed&&(n.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(n.duration=t.duration),t.curve&&(n.curve=t.curve),t.speed&&(n.speed=t.speed)),"string"==typeof n.curve&&(n.curve=i.getCurve(n.curve)),n}function a(t,e,n,i,r){var s,o=1e-7,a=(n(r)-n(r-o))/o;if(t instanceof Array){s=[];for(var u=0;u<t.length;u++)s[u]="number"==typeof t[u]?a*(t[u]-e[u])/i:0}else s=a*(t-e)/i;return s}function u(t,e,n){var i;if(t instanceof Array){i=[];for(var s=0;s<t.length;s++)i[s]="number"==typeof t[s]?r(t[s],e[s],n):t[s]}else i=r(t,e,n);return i}i.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},i.SUPPORTS_MULTIPLE=!0,i.DEFAULT_OPTIONS={curve:i.Curves.linear,duration:500,speed:0};var c={};i.registerCurve=function(t,e){return c[t]?!1:(c[t]=e,!0)},i.unregisterCurve=function(t){return c[t]?(delete c[t],!0):!1},i.getCurve=function(t){var e=c[t];if(void 0!==e)return e;throw new Error("curve not registered")},i.getCurves=function(){return c},i.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},i.prototype.set=function(t,e,n){if(!e)return this.reset(t),void(n&&n());if(this._startValue=s(this.get()),e=o(e,this.options),e.speed){var i=this._startValue;if(i instanceof Object){var r=0;for(var a in i)r+=(t[a]-i[a])*(t[a]-i[a]);e.duration=Math.sqrt(r)/e.speed}else e.duration=Math.abs(t-i)/e.speed}this._startTime=Date.now(),this._endValue=s(t),this._startVelocity=s(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=n},i.prototype.reset=function(t,e){if(this._callback){var n=this._callback;this._callback=void 0,n()}this.state=s(t),this.velocity=s(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},i.prototype.getVelocity=function(){return this.velocity},i.prototype.get=function(t){return this.update(t),this.state},i.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var n=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(n)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,n)}}}else if(this._callback){var i=this._callback;this._callback=void 0,i()}},i.prototype.isActive=function(){return this._active},i.prototype.halt=function(){this.reset(this.get())},i.registerCurve("linear",i.Curves.linear),i.registerCurve("easeIn",i.Curves.easeIn),i.registerCurve("easeOut",i.Curves.easeOut),i.registerCurve("easeInOut",i.Curves.easeInOut),i.registerCurve("easeOutBounce",i.Curves.easeOutBounce),i.registerCurve("spring",i.Curves.spring),i.customCurve=function(t,e){return t=t||0,e=e||0,function(n){return t*n+(-2*t-e+3)*n*n+(t+e-2)*n*n*n}},n.exports=i}),n("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,n){function i(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function r(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,n=this.currentAction[0],i=this.currentAction[1];i instanceof Object&&i.method?(e=i.method,"string"==typeof e&&(e=a[e])):e=o,this._currentMethod!==e&&(this._engineInstance=!(n instanceof Object)||e.SUPPORTS_MULTIPLE===!0||n.length<=e.SUPPORTS_MULTIPLE?new e:new s(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(i.velocity=this.velocity),this._engineInstance.set(n,i,r.bind(this))}var s=t("./MultipleTransition"),o=t("./TweenTransition"),a={};i.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},i.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},i.prototype.set=function(t,e,n){if(!e)return this.reset(t),n&&n(),this;var i=[t,e];return this.actionQueue.push(i),this.callbackQueue.push(n),this.currentAction||r.call(this),this},i.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},i.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},i.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},i.prototype.isActive=function(){return!!this.currentAction},i.prototype.halt=function(){this.set(this.get())},n.exports=i}),n("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,e,n){function i(t){return[t.clientWidth,t.clientHeight]}function r(t){this.container=t,this._allocator=new a(t),this._node=new s,this._eventOutput=new o,this._size=i(this.container),this._perspectiveState=new c(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:u.identity,opacity:1,origin:l,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(i(this.container))}.bind(this))}var s=t("./RenderNode"),o=t("./EventHandler"),a=t("./ElementAllocator"),u=t("./Transform"),c=t("famous/transitions/Transitionable"),l=[0,0];r.prototype.getAllocator=function(){return this._allocator},r.prototype.add=function(t){return this._node.add(t)},r.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},r.prototype.getSize=function(){return this._size},r.prototype.setSize=function(t){t||(t=i(this.container)),this._size[0]=t[0],this._size[1]=t[1]},r.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(this.container.style.perspective=e?e.toFixed()+"px":"",this.container.style.webkitPerspective=e?e.toFixed():"",this._perspective=e),this._node.commit(this._nodeContext)},r.prototype.getPerspective=function(){return this._perspectiveState.get()},r.prototype.setPerspective=function(t,e,n){return this._perspectiveState.set(t,e,n)},r.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},r.prototype.on=function(t,e){return this._eventOutput.on(t,e)},r.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},r.prototype.pipe=function(t){return this._eventOutput.pipe(t)},r.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},n.exports=r}),n("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,n){function i(t){this._value=t,this.eventOutput=null}function r(){this.eventOutput=new s,this.eventOutput.bindThis(this),s.setOutputHandler(this,this.eventOutput)}var s=t("./EventHandler");i.patch=function(t){for(var e=new i(t),n=1;n<arguments.length;n++)e.patch(arguments[n]);return t},i.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)i in t&&n[i]&&n[i].constructor===Object&&t[i]&&t[i].constructor===Object?(t.hasOwnProperty(i)||(t[i]=Object.create(t[i])),this.key(i).patch(n[i]),this.eventOutput&&this.eventOutput.emit("change",{id:i,value:this.key(i).value()})):this.set(i,n[i])}return this},i.prototype.setOptions=i.prototype.patch,i.prototype.key=function(t){var e=new i(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},i.prototype.get=function(t){return this._value[t]},i.prototype.getOptions=i.prototype.get,i.prototype.set=function(t,e){var n=this.get(t);return this._value[t]=e,this.eventOutput&&e!==n&&this.eventOutput.emit("change",{id:t,value:e}),this},i.prototype.value=function(){return this._value},i.prototype.on=function(){return r.call(this),this.on.apply(this,arguments)},i.prototype.removeListener=function(){return r.call(this),this.removeListener.apply(this,arguments)},i.prototype.pipe=function(){return r.call(this),this.pipe.apply(this,arguments)},i.prototype.unpipe=function(){return r.call(this),this.unpipe.apply(this,arguments)},n.exports=i}),n("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,n){function i(){y.runLoop?(l.step(),window.requestAnimationFrame(i)):m=!1}function r(){for(var t=0;t<h.length;t++)h[t].emit("resize");g.emit("resize")}var s,o,a=t("./Context"),u=t("./EventHandler"),c=t("./OptionsManager"),l={},h=[],p=[],f=[],d=Date.now(),m=!0,v={},g=new u,y={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},_=new c(y),b=10;l.step=function(){var t=Date.now();if(!(o&&o>t-d)){var e=0;for(s=t-d,d=t,g.emit("prerender"),e=0;e<p.length;e++)p[e].call(this);for(p.splice(0);f.length&&Date.now()-t<b;)f.shift().call(this);for(e=0;e<h.length;e++)h[e].update();g.emit("postrender")}},window.requestAnimationFrame(i),window.addEventListener("resize",r,!1),r(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),l.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(l):g.pipe(t)},l.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(l):g.unpipe(t)},l.on=function(t,e){return t in v||(v[t]=g.emit.bind(g,t),document.body?document.body.addEventListener(t,v[t]):l.nextTick(function(t,e){document.body.addEventListener(t,e)}.bind(this,t,v[t]))),g.on(t,e)},l.emit=function(t,e){return g.emit(t,e)},l.removeListener=function(t,e){return g.removeListener(t,e)},l.getFPS=function(){return 1e3/s},l.setFPSCap=function(t){o=Math.floor(1e3/t)},l.getOptions=function(){return _.getOptions.apply(_,arguments)},l.setOptions=function(){return _.setOptions.apply(_,arguments)},l.createContext=function(t){var e=!1;t||(t=document.createElement(y.containerType),t.classList.add(y.containerClass),e=!0);var n=new a(t);return l.registerContext(n),e&&l.nextTick(function(t,e){document.body.appendChild(e),t.emit("resize")}.bind(this,n,t)),n},l.registerContext=function(t){return h.push(t),t},l.nextTick=function(t){p.push(t)},l.defer=function(t){f.push(t)},_.on("change",function(t){"fpsCap"===t.id?l.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,window.requestAnimationFrame(i))}),n.exports=l}),n("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,e,n){function i(t){this._final=o.identity.slice(),this.translate=new s([0,0,0]),this.rotate=new s([0,0,0]),this.skew=new s([0,0,0]),this.scale=new s([1,1,1]),t&&this.set(t)}function r(){return o.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var s=t("./Transitionable"),o=t("famous/core/Transform"),a=t("famous/utilities/Utility");i.prototype.setTranslate=function(t,e,n){return this.translate.set(t,e,n),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},i.prototype.setScale=function(t,e,n){return this.scale.set(t,e,n),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},i.prototype.setRotate=function(t,e,n){return this.rotate.set(t,e,n),this._final=r.call(this),this._final=o.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},i.prototype.setSkew=function(t,e,n){return this.skew.set(t,e,n),this._final=o.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},i.prototype.set=function(t,e,n){this._final=t;var i=o.interpret(t),r=n?a.after(4,n):null;return this.translate.set(i.translate,e,r),this.rotate.set(i.rotate,e,r),this.skew.set(i.skew,e,r),this.scale.set(i.scale,e,r),this},i.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},i.prototype.get=function(){return this.isActive()?r.call(this):this._final},i.prototype.getFinal=function(){return this._final},i.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},i.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},n.exports=i}),n("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,e,n){function i(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:s.identity,opacity:1,origin:null,align:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size))
}function r(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var s=t("./Transform"),o=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");i.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},i.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},i.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},i.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},i.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},i.prototype.setTransform=function(t,e,n){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,n),this):this.transformFrom(t)},i.prototype.setOpacity=function(t,e,n){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new o(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,n)):this.opacityFrom(t)},i.prototype.setOrigin=function(t,e,n){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new o(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,n),this):this.originFrom(t)},i.prototype.setAlign=function(t,e,n){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new o(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,n),this):this.alignFrom(t)},i.prototype.setSize=function(t,e,n){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new o(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,n),this):this.sizeFrom(t)},i.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},i.prototype.getTransform=function(){return this._transformGetter()},i.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},i.prototype.getOpacity=function(){return this._opacityGetter()},i.prototype.getOrigin=function(){return this._originGetter()},i.prototype.getAlign=function(){return this._alignGetter()},i.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},i.prototype.modify=function(t){return r.call(this),this._output.target=t,this._output},n.exports=i}),n("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,e,n){function i(t){this._node=new o,this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||i.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var r=t("./EventHandler"),s=t("./OptionsManager"),o=t("./RenderNode");i.DEFAULT_OPTIONS={},i.prototype.getOptions=function(){return this._optionsManager.value()},i.prototype.setOptions=function(t){this._optionsManager.patch(t)},i.prototype.add=function(){return this._node.add.apply(this._node,arguments)},i.prototype._add=i.prototype.add,i.prototype.render=function(){return this._node.render()},i.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},n.exports=i}),n("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,n){function i(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=p.register(this),t&&this.setOptions(t),this._currTarget=null}function r(t){for(var e in this.eventHandler.listeners)t.addEventListener(e,this.eventForwarder)}function s(t){for(var e in this.eventHandler.listeners)t.removeEventListener(e,this.eventForwarder)}function o(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function a(t){for(var e in this.properties)t.style[e]=this.properties[e]}function u(t){for(var e in this.properties)t.style[e]=""}function c(t){t[12]=Math.round(t[12]*m)/m,t[13]=Math.round(t[13]*m)/m;for(var e="matrix3d(",n=0;15>n;n++)e+=t[n]<1e-6&&t[n]>-1e-6?"0,":t[n]+",";return e+=t[15]+")"}function l(t){return 100*t[0]+"% "+100*t[1]+"%"}function h(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var p=t("./Entity"),f=t("./EventHandler"),d=t("./Transform"),m=window.devicePixelRatio||1,v=void 0!==document.createElement("div").style.webkitTransform;i.prototype.elementType="div",i.prototype.elementClass="famous-surface",i.prototype.on=function(t,e){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,e)},i.prototype.removeListener=function(t,e){this.eventHandler.removeListener(t,e)},i.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var n=this.eventHandler.emit(t,e);return n&&e&&e.stopPropagation&&e.stopPropagation(),n},i.prototype.pipe=function(t){return this.eventHandler.pipe(t)},i.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},i.prototype.render=function(){return this.id},i.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];this._stylesDirty=!0},i.prototype.getProperties=function(){return this.properties},i.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},i.prototype.removeClass=function(t){var e=this.classList.indexOf(t);e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0)},i.prototype.setClasses=function(t){var e=0,n=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&n.push(this.classList[e]);for(e=0;e<n.length;e++)this.removeClass(n[e]);for(e=0;e<t.length;e++)this.addClass(t[e])},i.prototype.getClassList=function(){return this.classList},i.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},i.prototype.getContent=function(){return this.content},i.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var g;g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=c(e)}:v?function(t,e){t.style.webkitTransform=c(e)}:function(t,e){t.style.transform=c(e)};var y=v?function(t,e){t.style.webkitTransformOrigin=l(e)}:function(t,e){t.style.transformOrigin=l(e)},_=v?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};i.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var n=0;n<this.elementClass.length;n++)e.classList.add(this.elementClass[n]);else e.classList.add(this.elementClass);e.style.display="",r.call(this,e),this._currTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},i.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var e=this._currTarget,n=t.transform,i=t.opacity,r=t.origin,s=t.size;if(this._classesDirty){o.call(this,e);for(var u=this.getClassList(),c=0;c<u.length;c++)e.classList.add(u[c]);this._classesDirty=!1}if(this._stylesDirty&&(a.call(this,e),this._stylesDirty=!1),this._contentDirty&&(this.deploy(e),this.eventHandler.emit("deploy"),this._contentDirty=!1),this.size){var l=s;s=[this.size[0],this.size[1]],void 0===s[0]&&l[0]&&(s[0]=l[0]),void 0===s[1]&&l[1]&&(s[1]=l[1])}if(s[0]===!0&&(s[0]=e.clientWidth),s[1]===!0&&(s[1]=e.clientHeight),h(this._size,s)&&(this._size||(this._size=[0,0]),this._size[0]=s[0],this._size[1]=s[1],this._sizeDirty=!0),!n&&this._matrix)return this._matrix=null,this._opacity=0,void _(e);if(this._opacity!==i&&(this._opacity=i,e.style.opacity=i>=1?"0.999999":i),h(this._origin,r)||d.notEquals(this._matrix,n)||this._sizeDirty){n||(n=d.identity),this._matrix=n;var p=n;r&&(this._origin||(this._origin=[0,0]),this._origin[0]=r[0],this._origin[1]=r[1],p=d.thenMove(n,[-this._size[0]*r[0],-this._size[1]*r[1],0]),y(e,r)),g(e,p)}this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1)},i.prototype.cleanup=function(t){var e=0,n=this._currTarget;this.eventHandler.emit("recall"),this.recall(n),n.style.display="none",n.style.width="",n.style.height="",this._size=null,u.call(this,n);var i=this.getClassList();for(o.call(this,n),e=0;e<i.length;e++)n.classList.remove(i[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)n.classList.remove(this.elementClass[e]);else n.classList.remove(this.elementClass);s.call(this,n),this._currTarget=null,t.deallocate(n),_(n)},i.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},i.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},i.prototype.getSize=function(t){return t?this._size:this.size||this._size},i.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},n.exports=i}),n("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,e,n){function i(t){r.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new s(this._container),this.setContent(this._container)}var r=t("famous/core/Surface"),s=t("famous/core/Context");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="div",i.prototype.elementClass="famous-surface",i.prototype.add=function(){return this.context.add.apply(this.context,arguments)},i.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),r.prototype.render.apply(this,arguments)},i.prototype.deploy=function(){return this._shouldRecalculateSize=!0,r.prototype.deploy.apply(this,arguments)},i.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=r.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},n.exports=i}),n("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(t,e,n){function i(t,e){this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function r(t,e){o[t]&&(this._syncs[t]=new o[t](e),this.pipeSync(t))}var s=t("famous/core/EventHandler");i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DIRECTION_Z=2;var o={};i.register=function(t){for(var e in t){if(o[e]){if(o[e]===t[e])return;throw new Error("this key is registered to a different sync class")}o[e]=t[e]}},i.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},i.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},i.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},i.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)r.call(this,t[e]);else if(t instanceof Object)for(var n in t)r.call(this,n,t[n])},n.exports=i}),n("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventInput=new u,this._eventOutput=new u,u.setInputHandler(this,this._eventInput),u.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",r.bind(this)),this._eventInput.on("mousemove",s.bind(this)),this._eventInput.on("mouseup",o.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",o.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1}function r(t){var e,n;t.preventDefault();var i=t.clientX,r=t.clientY;this._prevCoord=[i,r],this._prevTime=l(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]);var s=this._payload;s.delta=e,s.position=this._position,s.velocity=n,s.clientX=i,s.clientY=r,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this._eventOutput.emit("start",s)}function s(t){if(this._prevCoord){var e=this._prevCoord,n=this._prevTime,r=t.clientX,s=t.clientY,o=l(),a=r-e[0],u=s-e[1];this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var h,p,f=Math.max(o-n,c),d=a/f,m=u/f,v=this.options.scale;this.options.direction===i.DIRECTION_X?(p=v*a,h=v*d,this._position+=p):this.options.direction===i.DIRECTION_Y?(p=v*u,h=v*m,this._position+=p):(p=[v*a,v*u],h=[v*d,v*m],this._position[0]+=p[0],this._position[1]+=p[1]);var g=this._payload;g.delta=p,g.position=this._position,g.velocity=h,g.clientX=r,g.clientY=s,g.offsetX=t.offsetX,g.offsetY=t.offsetY,this._eventOutput.emit("update",g),this._prevCoord=[r,s],this._prevTime=o,this._move=!0}}function o(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1)}function a(t){if(this._down&&this._move){var e=s.bind(this),n=function(t){o.call(this,t),document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)}.bind(this,t);document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}}var u=t("famous/core/EventHandler");i.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0},i.DIRECTION_X=0,i.DIRECTION_Y=1;var c=8,l=Date.now;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.propogate&&(this.options.propogate=t.propogate)},n.exports=i}),n("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",s.bind(this)),this._eventInput.on("wheel",s.bind(this)),this._inProgress=!1,this._loopBound=!1}function r(){if(this._inProgress&&c()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function s(t){t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,v=this._payload,v.slip=!0,v.position=this._position,v.clientX=t.clientX,v.clientY=t.clientY,v.offsetX=t.offsetX,v.offsetY=t.offsetY,this._eventOutput.emit("start",v),this._loopBound||(a.on("prerender",r.bind(this)),this._loopBound=!0));var e=c(),n=this._prevTime||e,s=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,o=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(s*=this.options.lineHeight,o*=this.options.lineHeight),this.options.rails&&(Math.abs(s)>Math.abs(o)?o=0:s=0);var l,h,p=Math.max(e-n,u),f=s/p,d=o/p,m=this.options.scale;this.options.direction===i.DIRECTION_X?(h=m*s,l=m*f,this._position+=h):this.options.direction===i.DIRECTION_Y?(h=m*o,l=m*d,this._position+=h):(h=[m*s,m*o],l=[m*f,m*d],this._position[0]+=h[0],this._position[1]+=h[1]);var v=this._payload;v.delta=h,v.velocity=l,v.position=this._position,v.slip=!0,this._eventOutput.emit("update",v),this._prevTime=e,this._prevVel=l}var o=t("famous/core/EventHandler"),a=t("famous/core/Engine");i.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},i.DIRECTION_X=0,i.DIRECTION_Y=1;var u=8,c=Date.now;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},n.exports=i}),n("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,e,n){function i(t,e,n){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:l(),count:e.touches.length,history:n}}function r(t){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=i(n,t,null);this.eventOutput.emit("trackstart",r),this.selective||this.touchHistory[n.identifier]||this.track(r)}}function s(t){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=this.touchHistory[n.identifier];if(r){var s=i(n,t,r);this.touchHistory[n.identifier].push(s),this.eventOutput.emit("trackmove",s)}}}function o(t){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=this.touchHistory[n.identifier];if(r){var s=i(n,t,r);this.eventOutput.emit("trackend",s),delete this.touchHistory[n.identifier]}}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",r.bind(this)),this.eventInput.on("touchmove",s.bind(this)),this.eventInput.on("touchend",o.bind(this)),this.eventInput.on("touchcancel",o.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var c=t("famous/core/EventHandler"),l=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},n.exports=u}),n("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventOutput=new u,this._touchTracker=new a,u.setOutputHandler(this,this._eventOutput),u.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",r.bind(this)),this._touchTracker.on("trackmove",s.bind(this)),this._touchTracker.on("trackend",o.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function r(t){var e,n;void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]);var i=this._payload;i.delta=n,i.position=this._position,i.velocity=e,i.clientX=t.x,i.clientY=t.y,i.count=t.count,i.touch=t.identifier,this._eventOutput.emit("start",i)}function s(t){var e=t.history,n=e[e.length-1],r=e[e.length-2],s=r.timestamp,o=n.timestamp,a=n.x-r.x,u=n.y-r.y;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0);var l,h,p=Math.max(o-s,c),f=a/p,d=u/p,m=this.options.scale;this.options.direction===i.DIRECTION_X?(h=m*a,l=m*f,this._position+=h):this.options.direction===i.DIRECTION_Y?(h=m*u,l=m*d,this._position+=h):(h=[m*a,m*u],l=[m*f,m*d],this._position[0]+=h[0],this._position[1]+=h[1]);var v=this._payload;v.delta=h,v.velocity=l,v.position=this._position,v.clientX=t.x,v.clientY=t.y,v.count=t.count,v.touch=t.identifier,this._eventOutput.emit("update",v)}function o(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),u=t("famous/core/EventHandler");i.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1},i.DIRECTION_X=0,i.DIRECTION_Y=1;var c=8;i.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},i.prototype.getOptions=function(){return this.options},n.exports=i}),n("famous/transitions/Easing",["require","exports","module"],function(t,e,n){var i={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)))},outElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1===t?1:(n||(n=.3),e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)},inOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2===(t/=.5)?1:(n||(n=.3*1.5),e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)*.5+1)},inBack:function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)},outBack:function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1},inOutBack:function(t,e){return void 0===e&&(e=1.70158),(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-i.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*i.inBounce(2*t):.5*i.outBounce(2*t-1)+.5}};n.exports=i}),n("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,e,n){function i(t){return l.on(h,t),t}function r(t,e){var n=p(),r=function(){var i=p();i-n>=e&&(t.apply(this,arguments),l.removeListener(h,r))};return i(r)}function s(t,e){var n=p(),r=function(){var i=p();i-n>=e&&(t.apply(this,arguments),n=p())};return i(r)}function o(t,e){if(void 0===e)return void 0;var n=function(){e--,0>=e&&(t.apply(this,arguments),u(n))};return i(n)}function a(t,e){e=e||1;var n=e,r=function(){e--,0>=e&&(t.apply(this,arguments),e=n)};return i(r)}function u(t){l.removeListener(h,t)}function c(t,e){var n,i,s,o,a;return function(){i=this,a=arguments,s=p();var c=function(){var u=p-s;e>u?n=r(c,e-u):(n=null,o=t.apply(i,a))};return u(n),n=r(c,e),o}}var l=t("famous/core/Engine"),h="prerender",p=window.performance?function(){return window.performance.now()}:function(){return Date.now()};n.exports={setTimeout:r,setInterval:s,debounce:c,after:o,every:a,clear:u}}),function(){var t=this,e=t._,i=Array.prototype,r=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,u=i.concat,c=r.toString,l=r.hasOwnProperty,h=Array.isArray,p=Object.keys,f=s.bind,d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):t._=d,d.VERSION="1.7.0";var m=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)}}return function(){return t.apply(e,arguments)}};d.iteratee=function(t,e,n){return null==t?d.identity:d.isFunction(t)?m(t,e,n):d.isObject(t)?d.matches(t):d.property(t)},d.each=d.forEach=function(t,e,n){if(null==t)return t;e=m(e,n);var i,r=t.length;if(r===+r)for(i=0;r>i;i++)e(t[i],i,t);else{var s=d.keys(t);for(i=0,r=s.length;r>i;i++)e(t[s[i]],s[i],t)}return t},d.map=d.collect=function(t,e,n){if(null==t)return[];e=d.iteratee(e,n);for(var i,r=t.length!==+t.length&&d.keys(t),s=(r||t).length,o=Array(s),a=0;s>a;a++)i=r?r[a]:a,o[a]=e(t[i],i,t);return o};var v="Reduce of empty array with no initial value";d.reduce=d.foldl=d.inject=function(t,e,n,i){null==t&&(t=[]),e=m(e,i,4);var r,s=t.length!==+t.length&&d.keys(t),o=(s||t).length,a=0;if(arguments.length<3){if(!o)throw new TypeError(v);n=t[s?s[a++]:a++]}for(;o>a;a++)r=s?s[a]:a,n=e(n,t[r],r,t);return n},d.reduceRight=d.foldr=function(t,e,n,i){null==t&&(t=[]),e=m(e,i,4);var r,s=t.length!==+t.length&&d.keys(t),o=(s||t).length;if(arguments.length<3){if(!o)throw new TypeError(v);n=t[s?s[--o]:--o]}for(;o--;)r=s?s[o]:o,n=e(n,t[r],r,t);return n},d.find=d.detect=function(t,e,n){var i;return e=d.iteratee(e,n),d.some(t,function(t,n,r){return e(t,n,r)?(i=t,!0):void 0}),i},d.filter=d.select=function(t,e,n){var i=[];return null==t?i:(e=d.iteratee(e,n),d.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i)},d.reject=function(t,e,n){return d.filter(t,d.negate(d.iteratee(e)),n)},d.every=d.all=function(t,e,n){if(null==t)return!0;e=d.iteratee(e,n);var i,r,s=t.length!==+t.length&&d.keys(t),o=(s||t).length;for(i=0;o>i;i++)if(r=s?s[i]:i,!e(t[r],r,t))return!1;return!0},d.some=d.any=function(t,e,n){if(null==t)return!1;e=d.iteratee(e,n);var i,r,s=t.length!==+t.length&&d.keys(t),o=(s||t).length;for(i=0;o>i;i++)if(r=s?s[i]:i,e(t[r],r,t))return!0;return!1},d.contains=d.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=d.values(t)),d.indexOf(t,e)>=0)},d.invoke=function(t,e){var n=a.call(arguments,2),i=d.isFunction(e);return d.map(t,function(t){return(i?e:t[e]).apply(t,n)})},d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matches(e))},d.findWhere=function(t,e){return d.find(t,d.matches(e))},d.max=function(t,e,n){var i,r,s=-1/0,o=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var a=0,u=t.length;u>a;a++)i=t[a],i>s&&(s=i)}else e=d.iteratee(e,n),d.each(t,function(t,n,i){r=e(t,n,i),(r>o||r===-1/0&&s===-1/0)&&(s=t,o=r)});return s},d.min=function(t,e,n){var i,r,s=1/0,o=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:d.values(t);for(var a=0,u=t.length;u>a;a++)i=t[a],s>i&&(s=i)}else e=d.iteratee(e,n),d.each(t,function(t,n,i){r=e(t,n,i),(o>r||1/0===r&&1/0===s)&&(s=t,o=r)});return s},d.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:d.values(t),i=n.length,r=Array(i),s=0;i>s;s++)e=d.random(0,s),e!==s&&(r[s]=r[e]),r[e]=n[s];return r},d.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=d.values(t)),t[d.random(t.length-1)]):d.shuffle(t).slice(0,Math.max(0,e))},d.sortBy=function(t,e,n){return e=d.iteratee(e,n),d.pluck(d.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var g=function(t){return function(e,n,i){var r={};return n=d.iteratee(n,i),d.each(e,function(i,s){var o=n(i,s,e);t(r,i,o)}),r}};d.groupBy=g(function(t,e,n){d.has(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=g(function(t,e,n){t[n]=e}),d.countBy=g(function(t,e,n){d.has(t,n)?t[n]++:t[n]=1}),d.sortedIndex=function(t,e,n,i){n=d.iteratee(n,i,1);for(var r=n(e),s=0,o=t.length;o>s;){var a=s+o>>>1;n(t[a])<r?s=a+1:o=a}return s},d.toArray=function(t){return t?d.isArray(t)?a.call(t):t.length===+t.length?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:t.length===+t.length?t.length:d.keys(t).length},d.partition=function(t,e,n){e=d.iteratee(e,n);var i=[],r=[];return d.each(t,function(t,n,s){(e(t,n,s)?i:r).push(t)}),[i,r]},d.first=d.head=d.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},d.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},d.rest=d.tail=d.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,d.identity)};var y=function(t,e,n,i){if(e&&d.every(t,d.isArray))return u.apply(i,t);for(var r=0,s=t.length;s>r;r++){var a=t[r];d.isArray(a)||d.isArguments(a)?e?o.apply(i,a):y(a,e,n,i):n||i.push(a)}return i};d.flatten=function(t,e){return y(t,e,!1,[])},d.without=function(t){return d.difference(t,a.call(arguments,1))},d.uniq=d.unique=function(t,e,n,i){if(null==t)return[];d.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=d.iteratee(n,i));for(var r=[],s=[],o=0,a=t.length;a>o;o++){var u=t[o];if(e)o&&s===u||r.push(u),s=u;else if(n){var c=n(u,o,t);d.indexOf(s,c)<0&&(s.push(c),r.push(u))}else d.indexOf(r,u)<0&&r.push(u)}return r},d.union=function(){return d.uniq(y(arguments,!0,!0,[]))},d.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,r=t.length;r>i;i++){var s=t[i];if(!d.contains(e,s)){for(var o=1;n>o&&d.contains(arguments[o],s);o++);o===n&&e.push(s)}}return e},d.difference=function(t){var e=y(a.call(arguments,1),!0,!0,[]);return d.filter(t,function(t){return!d.contains(e,t)})},d.zip=function(t){if(null==t)return[];for(var e=d.max(arguments,"length").length,n=Array(e),i=0;e>i;i++)n[i]=d.pluck(arguments,i);
return n},d.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},d.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=d.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}for(;r>i;i++)if(t[i]===e)return i;return-1},d.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},d.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;i>s;s++,t+=n)r[s]=t;return r};var _=function(){};d.bind=function(t,e){var n,i;if(f&&t.bind===f)return f.apply(t,a.call(arguments,1));if(!d.isFunction(t))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));_.prototype=t.prototype;var r=new _;_.prototype=null;var s=t.apply(r,n.concat(a.call(arguments)));return d.isObject(s)?s:r}},d.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,s=i.length;s>r;r++)i[r]===d&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},d.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=d.bind(t[n],t);return t},d.memoize=function(t,e){var n=function(i){var r=n.cache,s=e?e.apply(this,arguments):i;return d.has(r,s)||(r[s]=t.apply(this,arguments)),r[s]};return n.cache={},n},d.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},d.defer=function(t){return d.delay.apply(d,[t,1].concat(a.call(arguments,1)))},d.throttle=function(t,e,n){var i,r,s,o=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:d.now(),o=null,s=t.apply(i,r),o||(i=r=null)};return function(){var c=d.now();a||n.leading!==!1||(a=c);var l=e-(c-a);return i=this,r=arguments,0>=l||l>e?(clearTimeout(o),o=null,a=c,s=t.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(u,l)),s}},d.debounce=function(t,e,n){var i,r,s,o,a,u=function(){var c=d.now()-o;e>c&&c>0?i=setTimeout(u,e-c):(i=null,n||(a=t.apply(s,r),i||(s=r=null)))};return function(){s=this,r=arguments,o=d.now();var c=n&&!i;return i||(i=setTimeout(u,e)),c&&(a=t.apply(s,r),s=r=null),a}},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},d.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},d.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},d.once=d.partial(d.before,2),d.keys=function(t){if(!d.isObject(t))return[];if(p)return p(t);var e=[];for(var n in t)d.has(t,n)&&e.push(n);return e},d.values=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},d.pairs=function(t){for(var e=d.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},d.invert=function(t){for(var e={},n=d.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},d.functions=d.methods=function(t){var e=[];for(var n in t)d.isFunction(t[n])&&e.push(n);return e.sort()},d.extend=function(t){if(!d.isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++){e=arguments[i];for(n in e)l.call(e,n)&&(t[n]=e[n])}return t},d.pick=function(t,e,n){var i,r={};if(null==t)return r;if(d.isFunction(e)){e=m(e,n);for(i in t){var s=t[i];e(s,i,t)&&(r[i]=s)}}else{var o=u.apply([],a.call(arguments,1));t=new Object(t);for(var c=0,l=o.length;l>c;c++)i=o[c],i in t&&(r[i]=t[i])}return r},d.omit=function(t,e,n){if(d.isFunction(e))e=d.negate(e);else{var i=d.map(u.apply([],a.call(arguments,1)),String);e=function(t,e){return!d.contains(i,e)}}return d.pick(t,e,n)},d.defaults=function(t){if(!d.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t};var b=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var r=c.call(t);if(r!==c.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]===t)return i[s]===e;var o=t.constructor,a=e.constructor;if(o!==a&&"constructor"in t&&"constructor"in e&&!(d.isFunction(o)&&o instanceof o&&d.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var u,l;if("[object Array]"===r){if(u=t.length,l=u===e.length)for(;u--&&(l=b(t[u],e[u],n,i)););}else{var h,p=d.keys(t);if(u=p.length,l=d.keys(e).length===u)for(;u--&&(h=p[u],l=d.has(e,h)&&b(t[h],e[h],n,i)););}return n.pop(),i.pop(),l};d.isEqual=function(t,e){return b(t,e,[],[])},d.isEmpty=function(t){if(null==t)return!0;if(d.isArray(t)||d.isString(t)||d.isArguments(t))return 0===t.length;for(var e in t)if(d.has(t,e))return!1;return!0},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=h||function(t){return"[object Array]"===c.call(t)},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){d["is"+t]=function(e){return c.call(e)==="[object "+t+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return d.has(t,"callee")}),"function"!=typeof/./&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&t!==+t},d.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===c.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){return null!=t&&l.call(t,e)},d.noConflict=function(){return t._=e,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(t){return function(e){return e[t]}},d.matches=function(t){var e=d.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var r=e[i],s=r[0];if(r[1]!==t[s]||!(s in t))return!1}return!0}},d.times=function(t,e,n){var i=Array(Math.max(0,t));e=m(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=d.invert(w),T=function(t){var e=function(e){return t[e]},n="(?:"+d.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};d.escape=T(w),d.unescape=T(O),d.result=function(t,e){if(null==t)return void 0;var n=t[e];return d.isFunction(n)?t[e]():n};var M=0;d.uniqueId=function(t){var e=++M+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\u2028|\u2029/g,C=function(t){return"\\"+I[t]};d.template=function(t,e,n){!e&&n&&(e=n),e=d.defaults({},e,d.templateSettings);var i=RegExp([(e.escape||x).source,(e.interpolate||x).source,(e.evaluate||x).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(i,function(e,n,i,o,a){return s+=t.slice(r,a).replace(S,C),r=a+e.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),e}),s+="';\n",e.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(e.variable||"obj","_",s)}catch(a){throw a.source=s,a}var u=function(t){return o.call(this,t,d)},c=e.variable||"obj";return u.source="function("+c+"){\n"+s+"}",u},d.chain=function(t){var e=d(t);return e._chain=!0,e};var z=function(t){return this._chain?d(t).chain():t};d.mixin=function(t){d.each(d.functions(t),function(e){var n=d[e]=t[e];d.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),z.call(this,n.apply(d,t))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];d.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],z.call(this,n)}}),d.each(["concat","join","slice"],function(t){var e=i[t];d.prototype[t]=function(){return z.call(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},"function"==typeof n&&n.amd&&n("underscore",[],function(){return d})}.call(this),n("views/Cube",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/EventHandler","famous/inputs/MouseSync","famous/inputs/ScrollSync","famous/inputs/TouchSync","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/surfaces/ContainerSurface","famous/inputs/GenericSync","underscore"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),d.register({mouse:a,touch:c,scroll:u}),this.sync=new d(["mouse","scroll","touch"],{direction:[d.DIRECTION_X,d.DIRECTION_Y]}),this._eventInput=new o,this._eventOutput=new o,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput);var e=Math.max(this.options.dimensions[0],this.options.dimensions[1],this.options.dimensions[2]);this.root=new f({classes:["cube-container"],size:[e,e],properties:{backfaceVisibility:"visible"}});var n=Math.PI/2,r=Math.PI,v=[{origin:[0,0],translate:[0,0,0],rotate:[0,0,0],size:[this.options.dimensions[0],this.options.dimensions[1]]},{origin:[0,0],translate:[0,0,-this.options.dimensions[2]],rotate:[n,0,0],size:[this.options.dimensions[0],this.options.dimensions[2]]},{origin:[0,0],translate:[this.options.dimensions[0],0,0],rotate:[0,n,0],size:[this.options.dimensions[2],this.options.dimensions[1]]},{origin:[0,0],translate:[0,this.options.dimensions[1],0],rotate:[-n,0,0],size:[this.options.dimensions[0],this.options.dimensions[2]]},{origin:[0,0],translate:[0,0,-this.options.dimensions[2]],rotate:[0,-n,0],size:[this.options.dimensions[2],this.options.dimensions[1]]},{origin:[0,0],translate:[this.options.dimensions[0],0,-this.options.dimensions[2]],rotate:[0,r,0],size:[this.options.dimensions[0],this.options.dimensions[1]]}],g=[new p,new p,new p,new p,new p,new p];m.each(g,function(t,e){var n,i=v[e];n=void 0===this.options.surfaces||void 0===this.options.surfaces[e]?new s({classes:["face"],properties:{backgroundColor:"rgba(255, 255, 255, 0.8)"}}):this.options.surfaces[e];var r=new h({size:i.size,origin:i.origin,align:[0,0],transform:function(){var t=l.multiply(l.translate.apply(this,i.translate),l.rotate.apply(this,i.rotate));return t}}),o=(new p).add(r);o.add(n),g[e].set(o),this.root.add(g[e])}.bind(this)),this._eventInput.bindThis(this)}var r=t("famous/core/View"),s=t("famous/core/Surface"),o=t("famous/core/EventHandler"),a=t("famous/inputs/MouseSync"),u=t("famous/inputs/ScrollSync"),c=t("famous/inputs/TouchSync"),l=t("famous/core/Transform"),h=t("famous/core/Modifier"),p=t("famous/core/RenderNode"),f=t("famous/surfaces/ContainerSurface"),d=t("famous/inputs/GenericSync"),m=t("underscore");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={dimensions:[100,100,100],surfaces:[],transition:{duration:600,curve:"easeInOut"}},i.prototype.setOptions=function(t){this.options.dimensions=void 0===t.dimensions||t.dimensions.length<3?[100,100,100]:t.dimensions,this.options.transition=void 0===t.transition||"object"!=typeof t.transition?{duration:600,curve:"easeInOut"}:t.transition,this.options.surfaces=void 0===t.surfaces?[]:t.surfaces},i.prototype.render=function(){return[{target:this.root.render()}]},n.exports=i}),n("views/FamousCube",["require","exports","module","famous/core/View","famous/surfaces/ContainerSurface","famous/core/Transform","famous/core/Modifier","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/ScrollSync","famous/inputs/TouchSync","famous/core/EventHandler","famous/transitions/Easing","famous/utilities/Timer","famous/transitions/TransitionableTransform","views/Cube","underscore"],function(t,e,n){function i(){r.apply(this,arguments);var t,e,n,i,g,y=Date.now(),_=new r,b=[50,50,50],w=[];for(e=0;10>e;e++)g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push(5>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(50,50*e+50,0)}:e>=5&&8>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(100+50*(e-5),50,0)}:{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(100+50*(e-8),150,0)});for(e=0;11>e;e++)g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push(4>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(300-25*e,50*e+50,0)}:e>=4&&7>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(325+25*(e-4),50*(e-4)+100,0)}:e>=7&&9>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(275+50*(e-7),200,0)}:{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(225+150*(e-9),250,0)});for(e=0;17>e;e++)g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push(5>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(450,50*e+50,0)}:e>=5&&10>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(700,50*(e-5)+50,0)}:e>=10&&14>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(500+25*(e-10),50*(e-10)+75,0)}:{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(650-25*(e-14),50*(e-14)+75,0)});for(e=0;12>e;e++)g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push(2>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(825+50*e,50,0)}:e>=2&&4>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(825+50*(e-2),250,0)}:e>=4&&8>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(775,75+50*(e-4),0)}:{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(925,75+50*(e-8),0)});for(g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push({cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1e3,250,0)}),e=0;11>e;e++)g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push(4>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1075,50+50*e,0)}:e>=4&&8>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1225,50+50*(e-4),0)}:{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1100+50*(e-8),250,0)});for(e=0;10>e;e++)g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push(2>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1350+50*e,50,0)}:e>=2&&4>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1350+50*(e-2),250,0)}:e>=4&&6>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1350+50*(e-4),150,0)}:e>=6&&8>e?{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1300,75+50*(e-6),0)}:{cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1450,175+50*(e-8),0)});g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push({cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1300,225,0)}),g=new d,n=new a({transform:g}),i=new m({dimensions:b}),t=new r,t.add(n).add(i),_.add(t),w.push({cube:i,mod:n,trans:g,singleAnimate:!0,"final":o.translate(1450,75,0)}),w.sort(function(){return Math.round(Math.random())-.5});var O=function(t,e,n,i){e=void 0===e?o.translate(1500*Math.random(),1500*Math.random(),500*Math.random()):e,n=void 0===n?1e3:n,i=void 0===i?!0:i,t.trans.set(e,{duration:n,curve:p.inOutExpo},function(){var e=t.trans.getFinal(),n=.25*Math.random(),r=Math.random(),s=Math.ceil(3*Math.random());i?(e[11+s]-=100*Math.random(),e[0]-=n,e[5]-=n,e[10]-=n,e=o.multiply(e,o.rotate(-1*r,-1*r,-1*r))):(e[11+s]+=100*Math.random(),e[0]+=n,e[5]+=n,e[10]+=n,e=o.multiply(e,o.rotate(r,r,r))),i=!i,t.singleAnimate===!0&&O(t,e,1e3*Math.random()+3500,i)})};v.each(w,function(t,e){w[e].cube.root.on("click",function(){var t=this.context._node._child;v.each(t,function(t){t=t.get();var e=(t.get(),t._child.get());e.setProperties({backgroundColor:"rgba(255, 100, 100, .5)"})})}),O(t)});var T=new d,M=function(t){if(t>=w.length)return f.setTimeout(function(){v.each(w,function(t,e){w[e].singleAnimate=!0,O(w[e])}),f.setTimeout(function(){M(0)},2500)},3e3),!1;var e=w[t];w[t].singleAnimate=!1,w[t].trans.halt();var n=o.multiply(e.final,o.rotate(Math.random()*Date.now()*.002,Math.random()*Date.now()*-.001,Math.random()*Date.now()*-.002));e.trans.set(n,{duration:Math.round(300*Math.random())+300,curve:p.inOutExpo},function(){e.trans.set(e.final,{duration:333,curve:p.inOutCirc},function(){}),t++,M(t)})};f.setTimeout(function(){M(0)},2e3);var x=new s({properties:{backfaceVisibility:"visible","-webkit-backface-visibility":"visible"}}),I=new s({properties:{backfaceVisibility:"visible","-webkit-backface-visibility":"visible"}}),S=o.multiply(o.translate(0,0,0),o.rotate(.5,-.005,0));S=o.multiply(S,o.scale(.6,.6,.6)),T.set(S),n=new a({origin:[.5,.5],align:[.5,.5],transform:T}),I.add(_),x.add(n).add(I),u.register({mouse:c,touch:h,scroll:l});var C=new u(["mouse","scroll","touch"],{direction:[u.DIRECTION_X,u.DIRECTION_Y]});return x.pipe(C).pipe(this),C.on("update",function(t){var e=T.getFinal(),n=[.001*t.delta[1],t.delta[0]*-.002];e=o.multiply(e,o.rotate(n[0],n[1],0)),T.set(e)}),n=new a({origin:[.5,.5],transform:function(){return o.rotate(0,1e-4*(Date.now()-y),0)}}),this.add(n).add(x),this}var r=t("famous/core/View"),s=t("famous/surfaces/ContainerSurface"),o=t("famous/core/Transform"),a=t("famous/core/Modifier"),u=t("famous/inputs/GenericSync"),c=t("famous/inputs/MouseSync"),l=t("famous/inputs/ScrollSync"),h=t("famous/inputs/TouchSync"),p=(t("famous/core/EventHandler"),t("famous/transitions/Easing")),f=t("famous/utilities/Timer"),d=t("famous/transitions/TransitionableTransform"),m=t("views/Cube"),v=t("underscore");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={},n.exports=i}),n("main",["require","exports","module","famous/core/Engine","famous/core/Modifier","views/FamousCube"],function(t){var e=t("famous/core/Engine"),n=t("famous/core/Modifier"),i=t("views/FamousCube"),r=e.createContext();r.setPerspective(1e3);var s=new i,o=new n({size:[window.innerWidth,window.innerHeight]});r.add(o).add(s)}),e(["main"])}();